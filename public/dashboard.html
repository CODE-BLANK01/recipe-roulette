<!DOCTYPE html>
<html>
<head>
  <title>Cooking Dashboard</title>
</head>
<body>

<h1>üç≥ What Can I Cook?</h1>

<p>
  <a href="recipes.html">Recipes</a> |
  <a href="inventory.html">Inventory</a> |
  <a href="shopping.html">Shopping List</a>
</p>

<hr>

<div id="results"></div>

<script>
async function loadMatches() {
  const res = await fetch("/api/recipes/match");
  const recipes = await res.json();

  const container = document.getElementById("results");
  container.innerHTML = "";

  recipes.forEach(recipe => {
    const div = document.createElement("div");

    if (recipe.missingCount === 0) {
      div.innerHTML = `
        <h3 style="color:green">${recipe.title}</h3>
        <p>‚úÖ You can cook this now!</p>
        <hr>
      `;
    } else if (recipe.missingCount <= 2) {
      div.innerHTML = `
        <h3 style="color:orange">${recipe.title}</h3>
        <p>‚ö† Missing: ${recipe.missingIngredients.join(", ")}</p>
        <hr>
      `;
    } else {
      div.innerHTML = `
        <h3 style="color:gray">${recipe.title}</h3>
        <p>Too many missing ingredients</p>
        <hr>
      `;
    }

    container.appendChild(div);
  });
}

loadMatches();
</script>

</body>
</html>
